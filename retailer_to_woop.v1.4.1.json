{
  "openapi": "3.0.2",
  "tags": [
    {
      "name": "Ordre de livraison"
    },
    {
      "name": "Etiquette"
    },
    {
      "name": "Document"
    },
    {
      "name": "Retrait"
    },
    {
      "name": "Health"
    },
    {
      "name": "Retour produit"
    },
    {
      "name": "Point relais"
    },
    {
      "name": "Souscriptions"
    }
  ],
  "info": {
    "title": "Enseigne vers Woop",
    "description": "Contrat d'interface des APIs des enseignes vers Woop. \n\n<b>Version 1.4.1</b>",
    "version": "1.4.1"
  },
  "servers": [
    {
      "url": "https://ret-api.recette.gcp.last-mile.fr",
      "description": "URL de recette"
    },
    {
      "url": "https://ret-api.preprod.gcp.last-mile.fr",
      "description": "URL de preprod"
    },
    {
      "url": "https://retailer.last-mile.fr",
      "description": "URL de prod"
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "description": "Test si l'application est UP",
        "operationId": "getHealth",
        "responses": {
          "204": {
            "description": "Le service est opérationnel"
          }
        },
        "security": [],
        "summary": "Health"
      }
    },
    "/collects": {
      "post": {
        "tags": [
          "Retrait"
        ],
        "description": "Cette méthode permet d’effectuer une demande de retrait dans un emplacement de prélèvement précis. Dès la demande validée, l’ordre de retrait sera alors créé instantanément.",
        "operationId": "postCollects",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations de création de la demande de retrait.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/postCollects"
              },
              "examples": {
                "Exemple": {
                  "value": {
                    "reference": "CN123456789FR59",
                    "storeId": "MAG01",
                    "location": {
                      "type": "exchangePlace",
                      "id": "DRIVE-59-001"
                    },
                    "customer": {
                      "firstName": "Michel",
                      "lastName": "Dupont",
                      "phone": "+33600000000",
                      "email": "michel.dupont@mail.fr"
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 1.2,
                          "unit": "m"
                        },
                        "weight": {
                          "value": 560,
                          "unit": "g"
                        },
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "978020137962",
                            "cug": "123456",
                            "label": "T-Shirt XL Jaune",
                            "quantity": 1
                          }
                        ],
                        "quantity": 1
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Création de la demande de retrait réussie",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "example": "4f802782-bf37-4499-a50d-c7d0169c670d"
                    }
                  }
                },
                "examples": {}
              }
            }
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "Missing argument 'xxxxx'"
                      }
                    }
                  }
                }
              },
              "examples": {
                "Exemple": {
                  "value": {
                    "reasons": [
                      "Missing argument 'xxxxx'"
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "403": {
            "description": "Création de demande de retrait impossible pour ce 'storeId'"
          },
          "409": {
            "description": "Une demande de retrait avec cette réference existe dèjà dans la plateforme."
          }
        },
        "security": [
          {
            "oAuth2ClientCredentials": []
          }
        ],
        "summary": "Demande de retrait"
      }
    },
    "/orders": {
      "post": {
        "tags": [
          "Ordre de livraison"
        ],
        "description": "Cette méthode permet de créer une demande d'ordre de livraison côté Woop.\nDès l'ordre validée, un ensemble de devis sera envoyé aux différents transporteurs. L’ordre de transport sera alors créé lorsque l’un des devis aura été validé.",
        "operationId": "postOrders",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations de création d'ordre de livraison.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/postOrders"
              },
              "examples": {
                "Exemple par défaut": {
                  "value": {
                    "orderId": "65z4eq1d6q54zd1",
                    "referenceNumber": "65q41zdq65z14",
                    "storeId": "AX645",
                    "picking": {
                      "location": {
                        "type": "address",
                        "addressLine1": "237 rue du ballon",
                        "postalCode": "59110",
                        "city": "La Madeleine",
                        "country": "FR"
                      },
                      "interval": [
                        {
                          "start": "2019-11-27T12:00:00+0000",
                          "end": "2019-11-27T14:00:00+0000"
                        }
                      ],
                      "contact": {
                        "firstName": "Michel",
                        "lastName": "Dupont",
                        "phone": "+33600000000",
                        "email": "michel.dupont@mail.fr",
                        "language": "fr-BE",
                        "timezone": "Europe/Paris"
                      }
                    },
                    "delivery": {
                      "location": {
                        "type": "address",
                        "addressLine1": "165 avenue de Bretagne",
                        "elevator": true,
                        "floor": 3,
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "infos": "La rue est en travaux",
                      "interval": [
                        {
                          "start": "2019-11-28T13:30:00+0000",
                          "end": "2019-11-28T14:30:00+0000"
                        }
                      ],
                      "contact": {
                        "firstName": "Pierre",
                        "lastName": "Dupond",
                        "phone": "+33600000000",
                        "email": "pierre.dupond@mail.fr"
                      }
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 1.2,
                          "unit": "m"
                        },
                        "weight": {
                          "value": 560,
                          "unit": "g"
                        },
                        "reference": [
                          "123456789A",
                          "123456789B",
                          "123456789C",
                          "123456789D",
                          "123456789E"
                        ],
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "4dq86zd4q6zd4q64",
                            "cug": "q56zd4q65d4q",
                            "label": "Lampe",
                            "quantity": 1
                          }
                        ],
                        "quantity": 5
                      }
                    ],
                    "services": [
                      "SERVICE_SELECTED_ROOM"
                    ]
                  }
                },
                "Exemple avec assemblage": {
                  "value": {
                    "orderId": "65z4eq1d6q54zd1",
                    "referenceNumber": "65q41zdq65z14",
                    "storeId": "AX645",
                    "picking": {
                      "location": {
                        "type": "address",
                        "addressLine1": "237 rue du ballon",
                        "postalCode": "59110",
                        "city": "La Madeleine",
                        "country": "FR"
                      },
                      "interval": [
                        {
                          "start": "2019-11-27T12:00:00+0000",
                          "end": "2019-11-27T14:00:00+0000"
                        }
                      ],
                      "contact": {
                        "firstName": "Michel",
                        "lastName": "Dupont",
                        "phone": "+33600000000",
                        "email": "michel.dupont@mail.fr"
                      }
                    },
                    "delivery": {
                      "location": {
                        "type": "address",
                        "addressLine1": "165 avenue de Bretagne",
                        "elevator": true,
                        "floor": 3,
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "infos": "La rue est en travaux",
                      "interval": [
                        {
                          "start": "2019-11-28T13:30:00+0000",
                          "end": "2019-11-28T14:30:00+0000"
                        }
                      ],
                      "contact": {
                        "firstName": "Pierre",
                        "lastName": "Dupond",
                        "phone": "+33600000000",
                        "email": "pierre.dupond@mail.fr"
                      }
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 1.2,
                          "unit": "m"
                        },
                        "weight": {
                          "value": 560,
                          "unit": "g"
                        },
                        "reference": [
                          "123456789A",
                          "123456789B",
                          "123456789C",
                          "123456789D",
                          "123456789E"
                        ],
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "4dq86zd4q6zd4q64",
                            "cug": "q56zd4q65d4q",
                            "label": "Lampe",
                            "quantity": 1
                          }
                        ],
                        "quantity": 5
                      }
                    ],
                    "services": [
                      "SERVICE_ASSEMBLY"
                    ],
                    "productsPrice": {
                      "value": 30,
                      "currrency": "EUR"
                    }
                  }
                },
                "Exemple de livraison point relais": {
                  "value": {
                    "orderId": "65z4eq1d6q54zd1",
                    "referenceNumber": "65q41zdq65z14",
                    "storeId": "AX645",
                    "picking": {
                      "location": {
                        "type": "pickupPoint",
                        "carrierCode": "carrierX",
                        "id": "36JGZ7"
                      },
                      "interval": [
                        {
                          "start": "2019-11-27T12:00:00+0000",
                          "end": "2019-11-27T14:00:00+0000"
                        }
                      ],
                      "contact": {
                        "firstName": "Michel",
                        "lastName": "Dupont",
                        "phone": "+33600000000",
                        "email": "michel.dupont@mail.fr",
                        "language": "fr-BE",
                        "timezone": "Europe/Paris"
                      }
                    },
                    "delivery": {
                      "location": {
                        "type": "pickupPoint",
                        "carrierCode": "carrierX",
                        "id": "19GON"
                      },
                      "infos": "La rue est en travaux",
                      "interval": [
                        {
                          "start": "2019-11-28T13:30:00+0000",
                          "end": "2019-11-28T14:30:00+0000"
                        }
                      ],
                      "contact": {
                        "firstName": "Pierre",
                        "lastName": "Dupond",
                        "phone": "+33600000000",
                        "email": "pierre.dupond@mail.fr"
                      }
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 1.2,
                          "unit": "m"
                        },
                        "weight": {
                          "value": 560,
                          "unit": "g"
                        },
                        "reference": [
                          "123456789A",
                          "123456789B",
                          "123456789C",
                          "123456789D",
                          "123456789E"
                        ],
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "4dq86zd4q6zd4q64",
                            "cug": "q56zd4q65d4q",
                            "label": "Lampe",
                            "quantity": 1
                          }
                        ],
                        "quantity": 5
                      }
                    ],
                    "services": [
                      "SERVICE_SELECTED_ROOM"
                    ]
                  }
                },
                "Exemple de livraison en point de prélèvement": {
                  "value": {
                    "orderId": "65z4eq1d6q54zd1",
                    "referenceNumber": "65q41zdq65z14",
                    "storeId": "AX645",
                    "picking": {
                      "location": {
                        "type": "exchangePlace",
                        "id": "EXCHANGE PLACE 1"
                      },
                      "interval": [
                        {
                          "start": "2019-11-27T12:00:00+0000",
                          "end": "2019-11-27T14:00:00+0000"
                        }
                      ],
                      "contact": {
                        "firstName": "Michel",
                        "lastName": "Dupont",
                        "phone": "+33600000000",
                        "email": "michel.dupont@mail.fr",
                        "language": "fr-BE",
                        "timezone": "Europe/Paris"
                      }
                    },
                    "delivery": {
                      "location": {
                        "type": "exchangePlace",
                        "id": "EXCHANGE PLACE 2"
                      },
                      "infos": "La rue est en travaux",
                      "interval": [
                        {
                          "start": "2019-11-28T13:30:00+0000",
                          "end": "2019-11-28T14:30:00+0000"
                        }
                      ],
                      "contact": {
                        "firstName": "Pierre",
                        "lastName": "Dupond",
                        "phone": "+33600000000",
                        "email": "pierre.dupond@mail.fr"
                      }
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 1.2,
                          "unit": "m"
                        },
                        "weight": {
                          "value": 560,
                          "unit": "g"
                        },
                        "reference": [
                          "123456789A",
                          "123456789B",
                          "123456789C",
                          "123456789D",
                          "123456789E"
                        ],
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "4dq86zd4q6zd4q64",
                            "cug": "q56zd4q65d4q",
                            "label": "Lampe",
                            "quantity": 1
                          }
                        ],
                        "quantity": 5
                      }
                    ],
                    "services": [
                      "SERVICE_ASSEMBLY"
                    ],
                    "tags": [
                      {
                        "key": "origin",
                        "value": "web"
                      }
                    ],
                    "productsPrice": {
                      "value": 30,
                      "currrency": "EUR"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "L'ordre de livraison a bien été enregistrée"
          },
          "202": {
            "description": "L'ordre de livraison doit être complétée"
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "Missing argument 'xxxxx'"
                      }
                    }
                  }
                }
              },
              "examples": {
                "Exemple": {
                  "value": {
                    "reasons": [
                      "Missing argument 'xxxxx'"
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "403": {
            "description": "Création de l'ordre impossible pour le 'storeId'"
          },
          "409": {
            "description": "Création de commande avec cet 'orderId' impossible"
          }
        },
        "summary": "Demande d'ordre de livraison"
      },
      "get": {
        "tags": [
          "Ordre de livraison"
        ],
        "description": "Cette méthode retourne les détails du ou de plusieurs ordres de livraison en fonction des filtres sélectionnés.",
        "operationId": "getOrders",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/queryDeliveryStatus"
          },
          {
            "$ref": "#/components/parameters/queryPickingDate"
          },
          {
            "$ref": "#/components/parameters/queryStoreIdRequired"
          }
        ],
        "responses": {
          "200": {
            "description": "OK. Contient les ordres de livraison récupérées.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/responseOrder"
                },
                "examples": {
                  "Exemple par défaut": {
                    "value": {
                      "orders": [
                        {
                          "delivery": {
                            "externalDeliveryId": "123457",
                            "currentStatus": "DELIVERY_DELIVERED_OK",
                            "updatedAt": "2019-12-03T15:25:00+0000",
                            "interval": {
                              "start": "2019-12-03T15:00:00+0000",
                              "end": "2019-12-03T16:00:00+0000"
                            },
                            "trackingPageUrl:": "https://url_suivi_livraison"
                          },
                          "carrier": {
                            "name": "Transporteur A",
                            "contact": "Michel",
                            "claimUrl": "https://url_reclamation"
                          },
                          "order": {
                            "id": "q54zd65qzd465qz4d",
                            "currentStatus": "ORDER_DELIVERED",
                            "updatedAt": "2019-12-03T15:25:00+0000",
                            "referenceNumber": "q54zd65qzd465qz4d"
                          },
                          "picking": {
                            "interval": {
                              "start": "2019-12-02T13:00:00+0000",
                              "end": "2019-12-02T15:00:00+0000"
                            }
                          },
                          "packages": [
                            {
                              "id": "1324",
                              "reference": "B8413DD"
                            }
                          ]
                        },
                        {
                          "delivery": {
                            "externalDeliveryId": "123456",
                            "currentStatus": "DELIVERY_INIT",
                            "updatedAt": "2019-12-03T12:00:00+0000",
                            "interval": {
                              "start": "2019-12-07T12:00:00+0000",
                              "end": "2019-12-07T14:00:00+0000"
                            },
                            "trackingPageUrl:": "https://url_suivi_livraison"
                          },
                          "carrier": {
                            "name": "Transporteur A",
                            "contact": "Michel",
                            "claimUrl": "https://url_reclamation"
                          },
                          "order": {
                            "id": "65z4eq1d6q54zd1",
                            "currentStatus": "ORDER_CREATED",
                            "updatedAt": "2019-12-03T12:00:00+0000",
                            "referenceNumber": "65q41zdq65z14"
                          },
                          "picking": {
                            "interval": {
                              "start": "2019-12-06T13:30:00+0000",
                              "end": "2019-12-06T15:30:00+0000"
                            }
                          },
                          "packages": [
                            {
                              "id": "999",
                              "reference": "1323A"
                            }
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Elements manquants et/ou incorrect"
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "403": {
            "description": "Demande impossible pour ce 'storeId'"
          }
        },
        "summary": "Récupération d'ordres de livraison"
      }
    },
    "/orders/{orderId}": {
      "delete": {
        "tags": [
          "Ordre de livraison"
        ],
        "description": "Annulation d'un ordre de livraison",
        "operationId": "deleteOrders",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/pathOrderId"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations d'annulation de la commande.",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "reasons"
                ],
                "properties": {
                  "reasons": {
                    "description": "Raisons d’annulation",
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/cancelledReasons"
                    }
                  },
                  "comment": {
                    "type": "string",
                    "description": "Commentaire optionnel à ajouté si besoin lors de l’annulation"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "L'annulation a bien été prise en compte, mais peut engendrer des frais supplémentaires"
          },
          "204": {
            "description": "Requête traitée avec succès"
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "403": {
            "description": "L'ordre de livraison ne peut être annulée"
          },
          "404": {
            "description": "Le 'orderId' n'existe pas"
          }
        },
        "summary": "Annulation d'un ordre de livraison"
      },
      "get": {
        "tags": [
          "Ordre de livraison"
        ],
        "description": "Cette méthode retourne le détail d'un ordre de livraison.",
        "operationId": "getOrder",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/pathOrderId"
          }
        ],
        "responses": {
          "200": {
            "description": "OK. Contient l'ordre de livraison récupéré.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/responseOrder"
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "orders": [
                        {
                          "delivery": {
                            "externalDeliveryId": "123456",
                            "currentStatus": "DELIVERY_INIT",
                            "updatedAt": "2019-12-03T12:00:00+0000",
                            "interval": {
                              "start": "2019-12-07T12:00:00+0000",
                              "end": "2019-12-07T14:00:00+0000"
                            },
                            "trackingPageUrl:": "https://url_suivi_livraison"
                          },
                          "carrier": {
                            "name": "Transporteur A",
                            "contact": "Michel",
                            "claimUrl": "https://url_reclamation"
                          },
                          "order": {
                            "id": "65z4eq1d6q54zd1",
                            "currentStatus": "ORDER_CREATED",
                            "updatedAt": "2019-12-03T12:00:00+0000",
                            "referenceNumber": "65q41zdq65z14"
                          },
                          "picking": {
                            "interval": {
                              "start": "2019-12-06T13:30:00+0000",
                              "end": "2019-12-06T15:30:00+0000"
                            }
                          },
                          "packages": [
                            {
                              "id": "999",
                              "reference": "A123"
                            }
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          }
        },
        "summary": "Récupération d'un ordre de livraison"
      },
      "patch": {
        "tags": [
          "Ordre de livraison"
        ],
        "description": "Cette méthode permet de modifier un ordre de livraison. La mise à jour peut déclencher une annulation de l'ordre de transport + création d’un nouvel ordre de transport si les informations modifiées sont jugées importantes ou non et impacte directement la livraison.",
        "operationId": "patchOrder",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/pathOrderId"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations de mise à jour.",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "orderId",
                  "storeId",
                  "picking",
                  "delivery",
                  "services",
                  "packages"
                ],
                "properties": {
                  "picking": {
                    "description": "Informations de l'emplacement de prélèvement",
                    "required": [
                      "location",
                      "interval",
                      "contact"
                    ],
                    "properties": {
                      "location": {
                        "$ref": "#/components/schemas/location"
                      },
                      "infos": {
                        "type": "string"
                      },
                      "interval": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/interval"
                        }
                      },
                      "contact": {
                        "$ref": "#/components/schemas/contact"
                      }
                    }
                  },
                  "delivery": {
                    "description": "Informations de l'emplacement de livraison",
                    "required": [
                      "location",
                      "interval",
                      "contact"
                    ],
                    "properties": {
                      "location": {
                        "$ref": "#/components/schemas/location"
                      },
                      "infos": {
                        "type": "string"
                      },
                      "interval": {
                        "type": "array",
                        "items": {
                          "$ref": "#/components/schemas/interval"
                        }
                      },
                      "contact": {
                        "$ref": "#/components/schemas/contact"
                      }
                    }
                  },
                  "packages": {
                    "type": "array",
                    "description": "Ensemble des colis",
                    "items": {
                      "$ref": "#/components/schemas/packages"
                    }
                  },
                  "services": {
                    "$ref": "#/components/schemas/services"
                  }
                }
              },
              "examples": {
                "Exemple": {
                  "value": {
                    "picking": {
                      "contact": {
                        "firstName": "Michel",
                        "lastName": "Dupont"
                      },
                      "location": {
                        "type": "address",
                        "addressLine1": "237 rue du ballon",
                        "postalCode": "59110",
                        "city": "La Madeleine",
                        "country": "FR"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requête traitée avec succès."
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          }
        },
        "summary": "Mise à jour d'un ordre de livraison"
      }
    },
    "/orders/{orderId}/label": {
      "get": {
        "tags": [
          "Etiquette"
        ],
        "description": "Cette méthode permet de récupérer une étiquette de transport en fonction de l'identifiant de l'ordre de livraison. \nL’étiquette peut être récupérée sous plusieurs formats (à condition que le transporteur soit compatible avec ce format).",
        "operationId": "getLabelByOrder",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/pathOrderId"
          },
          {
            "$ref": "#/components/parameters/queryMode"
          }
        ],
        "responses": {
          "200": {
            "description": "OK. Contient l'étiquette récupérée.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Informations de l'étiquette",
                  "properties": {
                    "base64": {
                      "type": "string",
                      "description": "L’étiquette est retournée en base64 au format indiqué lors de l’appel"
                    },
                    "trackingPageUrl": {
                      "type": "string",
                      "description": "Lien de la page de suivi de l'ordre de transport"
                    }
                  },
                  "required": [
                    "base64",
                    "trackingPageUrl"
                  ]
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "base64": "AxfzFZEGEg ...",
                      "trackingPageUrl:": "https://url_suivi_livraison"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "403": {
            "description": "Demande impossible pour ce 'orderId'"
          },
          "404": {
            "description": "Le 'orderId' n'existe pas"
          }
        },
        "summary": "Récupération d'étiquette de l'ordre de livraison"
      }
    },
    "/orders/{orderId}/return": {
      "post": {
        "tags": [
          "Retour produit"
        ],
        "description": "Cette méthode permet d'effectuer une demande de retour de produit d'un ordre de livraison.",
        "operationId": "postProductReturn",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/pathOrderId"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations de la demande de retour produit.",
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/postProductReturn"
                  }
                ]
              },
              "examples": {
                "Exemple par défaut": {
                  "value": {
                    "orderReturnId": "65z4eq1d6q54zd1",
                    "initialReferenceNumber": "65q41zdq65z14",
                    "storeId": "AX645",
                    "initialCarrier": true,
                    "picking": {
                      "location": {
                        "type": "address",
                        "addressLine1": "165 avenue de Bretagne",
                        "elevator": true,
                        "floor": 3,
                        "postalCode": "59000",
                        "city": "Lille",
                        "country": "FR"
                      },
                      "contact": {
                        "firstName": "Michel",
                        "lastName": "Dupont",
                        "phone": "+33600000000",
                        "email": "michel.dupont@mail.fr",
                        "language": "fr-FR",
                        "timezone": "Europe/Paris"
                      }
                    },
                    "delivery": {
                      "location": {
                        "type": "address",
                        "addressLine1": "237 rue du ballon",
                        "postalCode": "59110",
                        "city": "La Madeleine",
                        "country": "FR"
                      },
                      "infos": "La rue est en travaux",
                      "contact": {
                        "firstName": "Pierre",
                        "lastName": "Dupond",
                        "phone": "+33600000000",
                        "email": "pierre.dupond@mail.fr",
                        "language": "fr-FR",
                        "timezone": "Europe/Paris"
                      }
                    },
                    "packages": [
                      {
                        "length": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "width": {
                          "value": 15,
                          "unit": "cm"
                        },
                        "height": {
                          "value": 1.2,
                          "unit": "m"
                        },
                        "weight": {
                          "value": 560,
                          "unit": "g"
                        },
                        "products": [
                          {
                            "type": "TYPOLOGY_GENERIC",
                            "ean": "4dq86zd4q6zd4q64",
                            "cug": "q56zd4q65d4q",
                            "label": "Lampe",
                            "quantity": 1
                          }
                        ],
                        "quantity": 5
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Le retour a bien été enregistrée"
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "Missing argument 'xxxxx'"
                      }
                    }
                  }
                }
              },
              "examples": {
                "Exemple": {
                  "value": {
                    "reasons": [
                      "Missing argument 'xxxxx'"
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "403": {
            "description": "Création d'un retour impossible pour le 'storeId'"
          },
          "409": {
            "description": "Création de retour de prouit avec ce 'referenceNumber' impossible"
          }
        },
        "summary": "Demande de retour produit"
      }
    },
    "/orders/{orderId}/documents": {
      "get": {
        "tags": [
          "Document"
        ],
        "description": "Cette méthode permet de récupérer les informations des documents attachés à un ordre de livraison.",
        "operationId": "getOrderDocuments",
        "parameters": [
          {
            "$ref": "#/components/parameters/pathOrderId"
          }
        ],
        "responses": {
          "200": {
            "description": "OK. Contient les documents.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "documents": {
                      "type": "array",
                      "description": "Liste des documents",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "description": "Identifiant du document"
                          },
                          "date": {
                            "type": "string",
                            "format": "date-time",
                            "description": "Date du document"
                          },
                          "name": {
                            "type": "string",
                            "description": "Nom du document"
                          },
                          "type": {
                            "type": "string",
                            "description": "Type de document",
                            "enum": [
                              "EVIDENCE",
                              "INVOICE",
                              "CONTRACT"
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "documents": [
                        {
                          "id": "5efda342ajkj700012064b57",
                          "date": "2020-07-02T09:05:06.361Z",
                          "type": "EVIDENCE",
                          "name": "picture_1593680706.pdf"
                        },
                        {
                          "id": "5efda342ajkj700012064b55",
                          "date": "2020-07-02T09:06:06.361Z",
                          "type": "INVOICE",
                          "name": "invoice_1593680706.pdf"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "204": {
            "description": "Pas de documents sur cet ordre de livraison."
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "404": {
            "description": "Le 'orderId' n'existe pas"
          }
        },
        "summary": "Récupération des documents de l'ordre de livraison."
      }
    },
    "/orders/{orderId}/documents/download": {
      "get": {
        "tags": [
          "Document"
        ],
        "description": "Cette méthode permet de télécharger les documents de l'ordre de livraison en zip.",
        "operationId": "downloadOrderDocuments",
        "parameters": [
          {
            "$ref": "#/components/parameters/pathOrderId"
          }
        ],
        "responses": {
          "200": {
            "description": "OK. Contient les documents au format zip.",
            "content": {
              "application/zip": {
                "schema": {
                  "type": "string",
                  "format": "binary",
                  "description": ""
                },
                "examples": {}
              }
            }
          },
          "204": {
            "description": "Pas de documents sur cet ordre de livraison."
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "404": {
            "description": "Le 'orderId' n'existe pas"
          }
        },
        "summary": "Téléchargement des documents de l'ordre de livraison"
      }
    },
    "/orders/{orderId}/documents/{documentId}/download": {
      "get": {
        "tags": [
          "Document"
        ],
        "description": "Cette méthode permet de télécharger un document d'un ordre de livraison",
        "operationId": "downloadOrderDocument",
        "parameters": [
          {
            "$ref": "#/components/parameters/pathOrderId"
          },
          {
            "$ref": "#/components/parameters/pathDocumentId"
          }
        ],
        "responses": {
          "200": {
            "description": "OK. Contient le document au format original du document",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "404": {
            "description": "Le 'orderId' ou 'documentId' n'existe pas"
          }
        },
        "summary": "Téléchargement d'un document de l'ordre de livraison"
      }
    },
    "/pickupPoints": {
      "get": {
        "tags": [
          "Point relais"
        ],
        "description": "Cette méthode permet de récupérer la liste des point relais des transporteurs situés autour d’une géolocalisation donnée.",
        "operationId": "getPickupPoints",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          },
          {
            "$ref": "#/components/parameters/queryLatitude"
          },
          {
            "$ref": "#/components/parameters/queryLongitude"
          },
          {
            "$ref": "#/components/parameters/queryNumber"
          },
          {
            "$ref": "#/components/parameters/queryKilometricDistance"
          },
          {
            "$ref": "#/components/parameters/queryPickupPointType"
          },
          {
            "$ref": "#/components/parameters/queryStoreId"
          },
          {
            "$ref": "#/components/parameters/queryPickupPointCarrierCode"
          }
        ],
        "responses": {
          "200": {
            "description": "OK. Contient les point relais récupérés.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "pickupPoints": {
                      "type": "array",
                      "description": "Informations sur les point relais",
                      "items": {
                        "type": "object",
                        "properties": {
                          "address": {
                            "allOf": [
                              {
                                "$ref": "#/components/schemas/address"
                              },
                              {
                                "type": "object",
                                "properties": {
                                  "title": {
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "title"
                                ]
                              }
                            ],
                            "description": "Adresse du point relais"
                          },
                          "coordinates": {
                            "$ref": "#/components/schemas/coordinates"
                          },
                          "id": {
                            "type": "string",
                            "description": "Id du point relais"
                          },
                          "carrier": {
                            "$ref": "#/components/schemas/pickupPointCarrier"
                          },
                          "openingHours": {
                            "type": "object",
                            "description": "Horaires d'ouverture du point relais",
                            "properties": {
                              "monday": {
                                "type": "array",
                                "description": "Horaires du lundi",
                                "items": {
                                  "$ref": "#/components/schemas/interval_hour"
                                }
                              },
                              "tuesday": {
                                "type": "array",
                                "description": "Horaires du mardi",
                                "items": {
                                  "$ref": "#/components/schemas/interval_hour"
                                }
                              },
                              "wednesday": {
                                "type": "array",
                                "description": "Horaires du mercredi",
                                "items": {
                                  "$ref": "#/components/schemas/interval_hour"
                                }
                              },
                              "thursday": {
                                "type": "array",
                                "description": "Horaires du jeudi",
                                "items": {
                                  "$ref": "#/components/schemas/interval_hour"
                                }
                              },
                              "friday": {
                                "type": "array",
                                "description": "Horaires du vendredi",
                                "items": {
                                  "$ref": "#/components/schemas/interval_hour"
                                }
                              },
                              "saturday": {
                                "type": "array",
                                "description": "Horaires du samedi",
                                "items": {
                                  "$ref": "#/components/schemas/interval_hour"
                                }
                              },
                              "sunday": {
                                "type": "array",
                                "description": "Horaires du dimanche",
                                "items": {
                                  "$ref": "#/components/schemas/interval_hour"
                                }
                              }
                            }
                          },
                          "maxWeight": {
                            "$ref": "#/components/schemas/mass"
                          }
                        },
                        "required": [
                          "address",
                          "coordinates",
                          "id",
                          "carrier",
                          "openingHours",
                          "maxWeight"
                        ]
                      }
                    }
                  }
                },
                "examples": {
                  "Exemple": {
                    "value": {
                      "pickupPoints": [
                        {
                          "address": {
                            "addressLine1": "168 RUE DES POSTES",
                            "postalCode": "59000",
                            "city": "Lille",
                            "country": "FR",
                            "title": "Point relais"
                          },
                          "coordinates": {
                            "latitude": 50.638386,
                            "longitude": 3.077183
                          },
                          "id": "q251zd564qz",
                          "carrier": {
                            "code": "transporteur1",
                            "name": "Transporteur A"
                          },
                          "openingHours": {
                            "monday": [
                              {
                                "start": "08:00",
                                "end": "19:30"
                              }
                            ],
                            "tuesday": [
                              {
                                "start": "08:00",
                                "end": "19:30"
                              }
                            ],
                            "wednesday": [
                              {
                                "start": "08:00",
                                "end": "19:30"
                              }
                            ],
                            "thursday": [
                              {
                                "start": "08:00",
                                "end": "19:30"
                              }
                            ],
                            "friday": [
                              {
                                "start": "08:00",
                                "end": "19:30"
                              }
                            ],
                            "saturday": [
                              {
                                "start": "08:00",
                                "end": "16:00"
                              }
                            ],
                            "sunday": [
                              {
                                "start": "08:00",
                                "end": "12:00"
                              }
                            ]
                          },
                          "maxWeight": {
                            "value": 250,
                            "unit": "kg"
                          }
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "Missing argument 'xxxxx'"
                      }
                    }
                  }
                }
              },
              "examples": {
                "Exemple": {
                  "value": {
                    "reasons": [
                      "Missing argument 'xxxxx'"
                    ]
                  }
                }
              }
            }
          },
          "401": {
            "description": "Vous n'êtes pas autorisé à accéder à cet élément."
          },
          "403": {
            "description": "Demande impossible pour le 'storeId'"
          }
        },
        "summary": "Récupération des points relais"
      }
    },
    "/subscriptions": {
      "post": {
        "tags": [
          "Souscriptions"
        ],
        "description": "Endpoint d'initialisation d'échanges avec les APIs enseignes.",
        "operationId": "postSubscription",
        "parameters": [
          {
            "$ref": "#/components/parameters/apiVersion"
          }
        ],
        "requestBody": {
          "required": true,
          "description": "Contient les informations des souscriptions.",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "callbacks"
                ],
                "properties": {
                  "callbacks": {
                    "type": "object",
                    "required": [
                      "carrier",
                      "status",
                      "score"
                    ],
                    "properties": {
                      "carrier": {
                        "type": "object",
                        "required": [
                          "url"
                        ],
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant d'obtenir le choix du transporteur."
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir woop vers retailer)",
                            "example": "1.1.1"
                          }
                        }
                      },
                      "status": {
                        "type": "object",
                        "required": [
                          "url"
                        ],
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant de communiquer les changements de statut."
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir woop vers retailer)",
                            "example": "1.1.1"
                          }
                        }
                      },
                      "score": {
                        "type": "object",
                        "required": [
                          "url"
                        ],
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant d'obtenir la note client."
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir woop vers retailer)",
                            "example": "1.1.1"
                          }
                        }
                      },
                      "deliveryClosure": {
                        "type": "object",
                        "required": [
                          "url"
                        ],
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant de communiquer les informations finales de facturation."
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir woop vers retailer)",
                            "example": "1.1.1"
                          }
                        }
                      },
                      "event": {
                        "type": "object",
                        "required": [
                          "url"
                        ],
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "Url de la route permettant de communiquer les notifications envoyées au client."
                          },
                          "version": {
                            "type": "string",
                            "description": "Version d'API pour ce callback (voir woop vers retailer)",
                            "example": "1.1.1"
                          }
                        }
                      }
                    }
                  },
                  "headers": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": [
                        "key",
                        "value"
                      ],
                      "properties": {
                        "key": {
                          "type": "string"
                        },
                        "value": {
                          "type": "string"
                        }
                      }
                    }
                  },
                  "auth": {
                    "type": "object",
                    "properties": {
                      "basic": {
                        "type": "object",
                        "description": "A definir si la méthode d'authentification à l'API voulue est basic",
                        "required": [
                          "username",
                          "password"
                        ],
                        "properties": {
                          "username": {
                            "type": "string"
                          },
                          "password": {
                            "type": "string"
                          }
                        }
                      },
                      "oauth2": {
                        "type": "object",
                        "description": "A definir si la méthode d'authentification à l'API voulue est oauth2",
                        "required": [
                          "client_id",
                          "client_secret",
                          "tokenEndPoint"
                        ],
                        "properties": {
                          "client_id": {
                            "type": "string"
                          },
                          "client_secret": {
                            "type": "string"
                          },
                          "audience": {
                            "type": "string"
                          },
                          "grant_type": {
                            "type": "string"
                          },
                          "tokenEndPoint": {
                            "type": "string",
                            "description": "Url permettant de recupérer le token d'accès en fonction du clientId et du clientSecret"
                          }
                        }
                      },
                      "token": {
                        "type": "object",
                        "description": "A définir si la méthode d'authentification donne un bearer token à partir d'un username/password",
                        "required": [
                          "username",
                          "password",
                          "endpoint"
                        ],
                        "properties": {
                          "username": {
                            "type": "string"
                          },
                          "password": {
                            "type": "string"
                          },
                          "endpoint": {
                            "type": "string",
                            "description": "Url permettant de recupérer le token d'accès"
                          }
                        }
                      }
                    }
                  }
                }
              },
              "examples": {
                "Basic": {
                  "value": {
                    "callbacks": {
                      "quote": {
                        "url": "https://my_url/quote",
                        "version": "1.0.0"
                      },
                      "delivery": {
                        "url": "https://my_url/delivery",
                        "version": "1.0.0"
                      },
                      "cancel": {
                        "url": "https://my_url/cancel",
                        "version": "1.0.0"
                      },
                      "score": {
                        "url": "https://my_url/score",
                        "version": "1.0.0"
                      }
                    },
                    "headers": [
                      {
                        "key": "x-api-key",
                        "value": "KJK13I7Y12"
                      }
                    ],
                    "auth": {
                      "basic": {
                        "username": "admin",
                        "password": "1234"
                      }
                    }
                  }
                },
                "OAuth2": {
                  "value": {
                    "callbacks": {
                      "quote": {
                        "url": "https://my_url/quote",
                        "version": "1.0.0"
                      },
                      "delivery": {
                        "url": "https://my_url/delivery",
                        "version": "1.0.0"
                      },
                      "cancel": {
                        "url": "https://my_url/cancel",
                        "version": "1.0.0"
                      },
                      "score": {
                        "url": "https://my_url/score",
                        "version": "1.0.0"
                      },
                      "price": {
                        "url": "https://my_url/price",
                        "version": "1.0.0"
                      }
                    },
                    "auth": {
                      "oauth2": {
                        "client_id": "8664fb6e578be877cdd16e2c13e1db3e",
                        "client_secret": "4bb43097953c6d3ffae77b77f4716bba",
                        "audience": "carrier.last-mile.fr",
                        "grant_type": "oAuth2ClientCredentials",
                        "tokenEndPoint": "token.last-mile.fr"
                      }
                    }
                  }
                },
                "Token": {
                  "value": {
                    "callbacks": {
                      "quote": {
                        "url": "https://my_url/quote",
                        "version": "1.0.0"
                      },
                      "delivery": {
                        "url": "https://my_url/delivery",
                        "version": "1.0.0"
                      },
                      "cancel": {
                        "url": "https://my_url/cancel",
                        "version": "1.0.0"
                      },
                      "score": {
                        "url": "https://my_url/score",
                        "version": "1.0.0"
                      }
                    },
                    "auth": {
                      "token": {
                        "username": "admin",
                        "password": "1234",
                        "endpoint": "token.last-mile.fr"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Requête traitée avec succès"
          },
          "400": {
            "description": "Elements manquants et/ou incorrect dans le body",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "reasons": {
                      "type": "array",
                      "items": {
                        "type": "string",
                        "example": "Missing argument 'xxxxx'"
                      }
                    }
                  }
                }
              },
              "examples": {
                "Exemple": {
                  "value": {
                    "reasons": [
                      "Missing argument 'xxxxx'"
                    ]
                  }
                }
              }
            }
          }
        },
        "summary": "Ajout de souscriptions"
      }
    }
  },
  "components": {
    "securitySchemes": {
      "oAuth2ClientCredentials": {
        "type": "oauth2",
        "flows": {
          "clientCredentials": {
            "tokenUrl": "https://last-mile.eu.auth0.com/oauth/token",
            "x-google-issuer": "https://last-mile.eu.auth0.com/",
            "x-google-jwks_uri": "https://last-mile.eu.auth0.com/.well-known/jwks.json",
            "x-google-audiences": "https://retailer.api.meltingpoint.fr/"
          }
        }
      }
    },
    "schemas": {
      "responseOrder": {
        "title": "Réponse ordre de livraison",
        "type": "object",
        "description": "Réponse ordre de livraison",
        "properties": {
          "orders": {
            "type": "array",
            "description": "Liste des ordres de livraison",
            "items": {
              "type": "object",
              "properties": {
                "delivery": {
                  "description": "Informations sur la livraison",
                  "type": "object",
                  "properties": {
                    "externalDeliveryId": {
                      "type": "string",
                      "description": "Identifiant de la livraison"
                    },
                    "currentStatus": {
                      "$ref": "#/components/schemas/deliveryStatus"
                    },
                    "updatedAt": {
                      "type": "string",
                      "description": "Date de dernière mise à jour"
                    },
                    "interval": {
                      "$ref": "#/components/schemas/interval"
                    },
                    "trackingPageUrl:": {
                      "type": "string",
                      "description": "Url de la page de suivi de livraison"
                    }
                  }
                },
                "carrier": {
                  "type": "object",
                  "description": "Informations du transporteur sélectionné",
                  "properties": {
                    "name": {
                      "type": "string",
                      "description": "Nom du transporteur"
                    },
                    "contact": {
                      "type": "string",
                      "description": "Information de contact du transporteur"
                    },
                    "claimUrl": {
                      "type": "string",
                      "description": "Url de réclamation du transporteur"
                    }
                  }
                },
                "order": {
                  "type": "object",
                  "description": "Informations de l'ordre de transport",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "Identifiant de l'ordre de livraison"
                    },
                    "currentStatus": {
                      "$ref": "#/components/schemas/orderStatus"
                    },
                    "updatedAt": {
                      "type": "string",
                      "description": "Date de dernière mise à jour"
                    },
                    "referenceNumber": {
                      "type": "string",
                      "description": "Référence de l'ordre de livraison"
                    }
                  }
                },
                "picking": {
                  "type": "object",
                  "description": "Informations sur le prélèvement",
                  "properties": {
                    "interval": {
                      "$ref": "#/components/schemas/interval"
                    }
                  }
                },
                "packages": {
                  "type": "array",
                  "description": "Informations des colis",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "description": "Identifiant du colis"
                      },
                      "reference": {
                        "type": "string",
                        "description": "Référence du colis"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "postCollects": {
        "type": "object",
        "required": [
          "reference",
          "storeId",
          "customer",
          "location",
          "packages"
        ],
        "properties": {
          "reference": {
            "type": "string",
            "description": "Identifiant de la demande de retrait"
          },
          "storeId": {
            "type": "string",
            "description": "Identifiant du magasin émettant la demande"
          },
          "customer": {
            "$ref": "#/components/schemas/contact"
          },
          "location": {
            "$ref": "#/components/schemas/location"
          },
          "packages": {
            "description": "Ensemble des colis",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/packages"
            }
          }
        },
        "description": "Demande de retrait",
        "title": "Demande de retrait"
      },
      "postOrders": {
        "type": "object",
        "description": "Demande d'ordre de livraison",
        "properties": {
          "orderId": {
            "type": "string",
            "description": "Identifiant unique de la commande"
          },
          "referenceNumber": {
            "type": "string",
            "description": "Référence de la commande, numéro associé à un magasin. Pouvant être égal à l’orderId."
          },
          "storeId": {
            "type": "string",
            "description": "Identifiant du magasin émettant la demande"
          },
          "picking": {
            "description": "Informations de l'emplacement de prélèvement",
            "type": "object",
            "required": [
              "location",
              "interval",
              "contact"
            ],
            "properties": {
              "location": {
                "$ref": "#/components/schemas/location"
              },
              "infos": {
                "type": "string",
                "description": "Commentaire libre"
              },
              "interval": {
                "type": "array",
                "description": "Créneaux de prélèvement",
                "items": {
                  "$ref": "#/components/schemas/interval"
                }
              },
              "contact": {
                "$ref": "#/components/schemas/contact"
              }
            }
          },
          "delivery": {
            "description": "Informations de l'emplacement de livraison",
            "type": "object",
            "required": [
              "location",
              "interval",
              "contact"
            ],
            "properties": {
              "location": {
                "$ref": "#/components/schemas/location"
              },
              "infos": {
                "type": "string",
                "description": "Commentaire libre"
              },
              "interval": {
                "type": "array",
                "description": "Créneaux de livraison",
                "items": {
                  "$ref": "#/components/schemas/interval"
                }
              },
              "contact": {
                "$ref": "#/components/schemas/contact"
              }
            }
          },
          "numberOfPackages": {
            "description": "Ce champ est à utiliser si vous souhaitez n'envoyer qu'un colis mais diviser son poids par X NumberOfPackage. La plateforme LMMP va regarder l'info NumberOfPackage puis calculer le nombre de package non générique. Puis va soustraire ce nombre au NumberOfPackage pour diviser le package contenant la marchandse générique par le résultat. ATTENTION : ce champ est spécifique à un besoin Décathlon, merci de ne pas en tenir compte pour le MVP si vous n'êtes pas ce retailer ",
            "type": "integer",
            "deprecated": true
          },
          "packages": {
            "description": "Ensemble des colis",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/packages"
            }
          },
          "services": {
            "$ref": "#/components/schemas/services"
          },
          "productsPrice": {
            "$ref": "#/components/schemas/productsPrice"
          },
          "tags": {
            "$ref": "#/components/schemas/tags"
          }
        },
        "required": [
          "orderId",
          "storeId",
          "picking",
          "delivery",
          "packages",
          "services"
        ],
        "title": "Demande d'ordre de livraison"
      },
      "postProductReturn": {
        "type": "object",
        "description": "Demande de retour",
        "title": "Demande de retour",
        "properties": {
          "orderReturnId": {
            "type": "string",
            "description": "Nouvel identifiant de l'ordre de transport"
          },
          "initialReferenceNumber": {
            "type": "string",
            "description": "Référence de la commande original"
          },
          "storeId": {
            "type": "string",
            "description": "Identifiant du magasin émettant la demande"
          },
          "initialCarrier": {
            "type": "string",
            "description": "Booléan précisant si le retour doit être effectué avec le même transporteur que la commande initiale"
          },
          "picking": {
            "type": "object",
            "required": [
              "location",
              "interval",
              "contact"
            ],
            "description": "Informations de prélèvement",
            "properties": {
              "location": {
                "$ref": "#/components/schemas/location"
              },
              "infos": {
                "type": "string",
                "description": "Commentaire libre"
              },
              "interval": {
                "type": "array",
                "description": "Créneaux de prélèvement",
                "items": {
                  "$ref": "#/components/schemas/interval"
                }
              },
              "contact": {
                "$ref": "#/components/schemas/contact"
              }
            }
          },
          "delivery": {
            "type": "object",
            "required": [
              "location",
              "interval",
              "contact"
            ],
            "description": "Informations de livraison",
            "properties": {
              "location": {
                "$ref": "#/components/schemas/location"
              },
              "infos": {
                "type": "string",
                "description": "Commentaire libre"
              },
              "interval": {
                "type": "array",
                "description": "Créneaux de livraison",
                "items": {
                  "$ref": "#/components/schemas/interval"
                }
              },
              "contact": {
                "$ref": "#/components/schemas/contact"
              }
            }
          },
          "packages": {
            "type": "array",
            "description": "Ensemble des colis",
            "items": {
              "$ref": "#/components/schemas/packages"
            }
          }
        },
        "required": [
          "orderReturnId",
          "initialReferenceNumber",
          "storeId",
          "initialCarrier",
          "picking",
          "delivery",
          "packages"
        ]
      },
      "tags": {
        "type": "array",
        "description": "Permet de définir des \"marqueurs\" sur cette commande",
        "items": {
          "type": "object",
          "required": [
            "key",
            "value"
          ],
          "properties": {
            "key": {
              "type": "string",
              "example": "origin"
            },
            "value": {
              "type": "string",
              "example": "web"
            }
          }
        },
        "title": "Tags"
      },
      "address": {
        "description": "Adresse",
        "title": "Adresse",
        "type": "object",
        "x-examples": {
          "Exemple": {
            "addressLine1": "179 boulevard de Turien",
            "addressLine2": "Woop",
            "elevator": true,
            "floor": 8,
            "postalCode": "59000",
            "city": "Lille",
            "country": "FR"
          }
        },
        "properties": {
          "addressLine1": {
            "type": "string",
            "description": "Adresse ligne 1"
          },
          "addressLine2": {
            "type": "string",
            "description": "Adresse ligne 2"
          },
          "elevator": {
            "type": "boolean",
            "description": "Indique si l’adresse possède un ascenseur"
          },
          "floor": {
            "type": "integer",
            "description": "Numéro de l'étage"
          },
          "doorCode": {
            "type": "string",
            "description": "Code de la porte"
          },
          "postalCode": {
            "type": "string",
            "description": "Code postale"
          },
          "city": {
            "type": "string",
            "description": "Ville"
          },
          "district": {
            "type": "string",
            "description": "Intitulé de l’arrondissement"
          },
          "country": {
            "$ref": "#/components/schemas/country"
          },
          "comment": {
            "type": "string",
            "description": "Commentaire libre d’utilisation"
          }
        },
        "required": [
          "addressLine1",
          "postalCode",
          "city",
          "country"
        ]
      },
      "deliveryStatus": {
        "type": "string",
        "enum": [
          "DELIVERY_STARTED",
          "DELIVERY_PICK_UP_REACHED",
          "DELIVERY_PICK_UP_OK",
          "DELIVERY_PICK_UP_PARTIALLY",
          "DELIVERY_IN_PROGRESS",
          "DELIVERY_AT_DROP_OF_LOCATION",
          "DELIVERY_PICK_UP_FAILED",
          "DELIVERY_DELIVERED_WITH_CLAIM",
          "DELIVERY_CANCELLED_WITH_RETURN",
          "DELIVERY_FAILED_WITH_RETURN",
          "DELIVERY_RETURNED_TO_PICK_UP",
          "DELIVERY_DELIVERED_OK",
          "DELIVERY_DELIVERED_PARTIALLY"
        ],
        "description": "Statut de livraison",
        "x-examples": {
          "Exemple": "DELIVERY_STARTED"
        },
        "title": "Statut de livraison"
      },
      "location": {
        "title": "Emplacement",
        "description": "Un emplacement représente un lieu de prélevement ou de livraison.",
        "x-examples": {
          "Adresse": {
            "type": "address",
            "addressLine1": "179 boulevard de Turin",
            "elevator": true,
            "floor": 8,
            "postalCode": "59000",
            "city": "Lille",
            "country": "FR"
          },
          "Point relais": {
            "type": "pickupPoint",
            "id": "76761",
            "carrierCode": "bpost"
          },
          "Point de prélèvement": {
            "type": "exchangePlace",
            "id": "1"
          }
        },
        "oneOf": [
          {
            "allOf": [
              {
                "type": "object",
                "description": "Emplacement de type adresse",
                "required": [
                  "type"
                ],
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "address"
                    ]
                  }
                }
              },
              {
                "$ref": "#/components/schemas/address"
              }
            ]
          },
          {
            "type": "object",
            "description": "Emplacement de type point relais",
            "required": [
              "type",
              "id",
              "carrierCode"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "pickupPoint"
                ]
              },
              "id": {
                "type": "string",
                "description": "Id du point relais"
              },
              "carrierCode": {
                "type": "string",
                "descriprion": "Code du transporteur",
                "exmample": "bpost"
              }
            }
          },
          {
            "type": "object",
            "description": "Emplacement de type point de prélèvement",
            "required": [
              "type",
              "id"
            ],
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "exchangePlace"
                ]
              },
              "id": {
                "type": "string",
                "description": "Id du point de prélèvement"
              }
            }
          }
        ]
      },
      "interval": {
        "description": "Créneau de dates",
        "type": "object",
        "properties": {
          "start": {
            "type": "string",
            "format": "datetime",
            "description": "Début du créneau"
          },
          "end": {
            "type": "string",
            "format": "datetime",
            "description": "Fin du créneau"
          }
        },
        "required": [
          "start",
          "end"
        ],
        "x-examples": {
          "Exemple": {
            "start": "2019-05-02T15:52:01+0000",
            "end": "2019-05-02T17:52:01+0000"
          }
        },
        "title": "Créneau de dates"
      },
      "interval_hour": {
        "type": "object",
        "properties": {
          "start": {
            "type": "string",
            "format": "time"
          },
          "end": {
            "type": "string",
            "format": "time"
          }
        },
        "required": [
          "start",
          "end"
        ],
        "x-examples": {
          "Exemple": {
            "start": "14:00",
            "end": "18:00"
          }
        },
        "description": "Créneau horaires",
        "title": "Créneau horaires"
      },
      "contact": {
        "title": "Contact",
        "description": "Contact",
        "type": "object",
        "x-examples": {
          "Exemple": {
            "firstName": "Jogn",
            "lastName": "Doe",
            "phone": "+33610101010",
            "email": "johndoe@mail.com",
            "language": "fr-FR",
            "timezone": "Europe/Paris"
          }
        },
        "properties": {
          "firstName": {
            "type": "string",
            "description": "Prénom"
          },
          "lastName": {
            "type": "string",
            "description": "Nom"
          },
          "phone": {
            "type": "string",
            "description": "Téléphone"
          },
          "email": {
            "type": "string",
            "description": "Email"
          },
          "language": {
            "$ref": "#/components/schemas/language"
          },
          "timezone": {
            "$ref": "#/components/schemas/timezone"
          }
        },
        "required": [
          "firstName",
          "lastName",
          "phone",
          "email",
          "language",
          "timezone"
        ]
      },
      "services": {
        "type": "array",
        "description": "Services de livraison",
        "items": {
          "$ref": "#/components/schemas/deliveryServices"
        },
        "x-examples": {
          "Exemple": [
            "SERVICE_PICKUP_POINT"
          ]
        },
        "title": "Services de livraison"
      },
      "packages": {
        "description": "Ensemble de colis",
        "type": "object",
        "properties": {
          "reference": {
            "$ref": "#/components/schemas/packagesReferences"
          },
          "length": {
            "$ref": "#/components/schemas/length"
          },
          "width": {
            "$ref": "#/components/schemas/length"
          },
          "height": {
            "$ref": "#/components/schemas/length"
          },
          "weight": {
            "$ref": "#/components/schemas/mass"
          },
          "products": {
            "type": "array",
            "description": "List des produits dans le colis",
            "items": {
              "type": "object",
              "properties": {
                "type": {
                  "$ref": "#/components/schemas/productTypes"
                },
                "ean": {
                  "type": "string",
                  "description": "Ean du produit"
                },
                "cug": {
                  "type": "string",
                  "description": "Cug du produit"
                },
                "label": {
                  "type": "string",
                  "description": "Description du produit"
                },
                "quantity": {
                  "type": "integer",
                  "default": 1,
                  "description": "Quantité du produit"
                }
              },
              "required": [
                "type"
              ]
            }
          },
          "quantity": {
            "type": "integer",
            "default": 1,
            "description": "Quantité de paquet"
          }
        },
        "required": [
          "length",
          "width",
          "height",
          "weight",
          "products"
        ],
        "x-examples": {
          "Exemple": {
            "reference": [
              "12345B"
            ],
            "length": {
              "value": 200,
              "unit": "mm"
            },
            "width": {
              "value": 200,
              "unit": "mm"
            },
            "height": {
              "value": 100,
              "unit": "mm"
            },
            "weight": {
              "value": 1,
              "unit": "kg"
            },
            "products": [
              {
                "type": "TYPOLOGY_GENERIC",
                "ean": "11233",
                "cug": "KJJNN",
                "label": "Ordinateur",
                "quantity": 1
              }
            ],
            "quantity": 1
          }
        },
        "title": "Colis"
      },
      "coordinates": {
        "type": "object",
        "required": [
          "latitude",
          "longitude"
        ],
        "properties": {
          "latitude": {
            "type": "number"
          },
          "longitude": {
            "type": "number"
          }
        },
        "description": "Coordonnées géographiques",
        "x-examples": {
          "Exemple": {
            "latitude": 50.63833,
            "longitude": 3.077359
          }
        },
        "title": "Coordonnées géographiques"
      },
      "length": {
        "required": [
          "unit",
          "value"
        ],
        "properties": {
          "value": {
            "type": "number"
          },
          "unit": {
            "$ref": "#/components/schemas/lengthUnits"
          }
        },
        "description": "Dimension",
        "x-examples": {
          "Exemple": {
            "value": 200,
            "unit": "mm"
          }
        },
        "title": "Dimension"
      },
      "mass": {
        "required": [
          "unit",
          "value"
        ],
        "properties": {
          "value": {
            "type": "number"
          },
          "unit": {
            "$ref": "#/components/schemas/massUnits"
          }
        },
        "description": "Masse",
        "x-examples": {
          "Exemple": {
            "value": 1,
            "unit": "kg"
          }
        },
        "title": "Masse"
      },
      "packagesReferences": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Références des colis",
        "title": "Références des colis"
      },
      "productsPrice": {
        "description": "Correspond au prix de vente des produits. A renseigner pour le service “SERVICE_INSTALL”",
        "x-examples": {
          "Exemple": {
            "value": 300,
            "currency": "EUR"
          }
        },
        "title": "Prix des produits",
        "type": "object",
        "properties": {
          "value": {
            "type": "number",
            "description": "valeur"
          },
          "currency": {
            "$ref": "#/components/schemas/currencies"
          }
        }
      },
      "pickupPointCarrier": {
        "description": "Transporteur du point relais",
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Nom du transporteur"
          },
          "code": {
            "type": "string",
            "description": "Code interne du transporteur"
          }
        },
        "required": [
          "name",
          "code"
        ],
        "x-examples": {
          "Exemple": {
            "name": "Bpost",
            "code": "bpost"
          }
        },
        "title": "Transporteur du point relais"
      },
      "cancelledReasons": {
        "type": "string",
        "description": "Raison d'annulation",
        "enum": [
          "CANCELLED_CANNOT_SERVICE",
          "CANCELLED_UNKNOWN",
          "CANCELLED_PREPARATION_DELAYED",
          "CANCELLED_BY_CLIENT",
          "CANCELLED_NEW_ADDRESS",
          "CANCELLED_INCOMPLETE"
        ],
        "x-examples": {
          "Exemple": "CANCELLED_CANNOT_SERVICE"
        },
        "title": "Raison d'annulation"
      },
      "deliveryServices": {
        "description": "Service de livraison",
        "type": "string",
        "enum": [
          "SERVICE_PICKUP_POINT",
          "SERVICE_REGULAR_FRONT_HOME",
          "SERVICE_SELECTED_ROOM",
          "SERVICE_FRONT_HOME",
          "SERVICE_UNPACKING",
          "SERVICE_INSTALL",
          "SERVICE_RECOVERY",
          "SERVICE_SIMPLE_INSTALL",
          "SERVICE_COMPLEX_INSTALL"
        ],
        "x-examples": {
          "Exemple": "SERVICE_PICKUP_POINT"
        },
        "title": "Services de livraison possible"
      },
      "productTypes": {
        "type": "string",
        "description": "Typologie du produit",
        "enum": [
          "TYPOLOGY_GENERIC",
          "TYPOLOGY_GROCERY",
          "TYPOLOGY_FRESH",
          "TYPOLOGY_FROZEN",
          "TYPOLOGY_DANGEROUS",
          "TYPOLOGY_HOUSEHOLD",
          "TYPOLOGY_VOLUMINOUS",
          "TYPOLOGY_FRAGILE",
          "TYPOLOGY_VOLUMINOUS_FRAGILE",
          "TYPOLOGY_LARGE_HOUSEHOLD",
          "TYPOLOGY_PALLET_GENERIC"
        ],
        "x-examples": {
          "Exemple": "TYPOLOGY_GENERIC"
        },
        "title": "Typologie du produit"
      },
      "currencies": {
        "type": "string",
        "description": "Devise",
        "enum": [
          "EUR"
        ],
        "x-examples": {
          "Exemple": "EUR"
        },
        "title": "Devise"
      },
      "lengthUnits": {
        "type": "string",
        "description": "Unité de mesure",
        "enum": [
          "mm",
          "cm",
          "m",
          "km",
          "in",
          "ft-us",
          "ft",
          "mi"
        ],
        "x-examples": {
          "Exemple": "mm"
        },
        "title": "Unité de mesure"
      },
      "massUnits": {
        "type": "string",
        "description": "Unité de masse",
        "enum": [
          "kg",
          "mcg",
          "mg",
          "g",
          "oz",
          "lb",
          "mt",
          "t"
        ],
        "x-examples": {
          "Exemple": "kg"
        },
        "title": "Unité de masse"
      },
      "country": {
        "type": "string",
        "description": "Code pays",
        "enum": [
          "FR",
          "BE"
        ],
        "x-examples": {
          "Exemple": "FR"
        },
        "title": "Pays"
      },
      "language": {
        "type": "string",
        "title": "Langue",
        "description": "Code langue",
        "x-examples": {
          "Exemple": "fr-FR"
        },
        "example": "fr-FR",
        "enum": [
          "en",
          "en-GB",
          "en-US",
          "en-CA",
          "fr",
          "fr-CA",
          "fr-FR",
          "fr-BE"
        ]
      },
      "timezone": {
        "type": "string",
        "title": "Fuseau horaire",
        "description": "(https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)",
        "example": "Europe/Paris",
        "x-examples": {
          "Exemple": "Europe/Paris"
        }
      },
      "orderStatus": {
        "title": "Statut de l'ordre de livraison",
        "type": "string",
        "enum": [
          "ORDER_CREATED",
          "ORDER_UPDATED",
          "ORDER_TO_BE_COMPLETED",
          "ORDER_WITH_NO_CARRIER_ELIGIBLE",
          "ORDER_TO_BE_QUOTED",
          "ORDER_QUOTED",
          "ORDER_WITH_NO_QUOTE",
          "ORDER_QUOTE_TO_BE_CONFIRMED",
          "ORDER_TO_BE_SENT_TO_CARRIER",
          "ORDER_WITH_NO_CARRIER_AVAILABLE",
          "ORDER_REFUSED_DELIVERY",
          "ORDER_TO_DELIVER",
          "ORDER_BEING_DELIVERED",
          "ORDER_DELIVERY_UNCOMPLETED",
          "ORDER_DELIVERED",
          "ORDER_CANCELLED"
        ],
        "description": "Statut de l'ordre de livraison"
      }
    },
    "parameters": {
      "apiVersion": {
        "in": "header",
        "name": "x-api-version",
        "description": "Version d'api ciblée",
        "required": true,
        "schema": {
          "type": "string",
          "example": "1.4.1"
        }
      },
      "queryDeliveryStatus": {
        "in": "query",
        "required": true,
        "name": "deliveryStatus",
        "description": "Filtre la liste des commande en fonction du statut de livraison",
        "schema": {
          "type": "string",
          "example": "DELIVERY_INIT"
        }
      },
      "queryPickingDate": {
        "in": "query",
        "required": false,
        "name": "pickingDate",
        "description": "Filtre par date de prélèvement. Permet de récupérer les commandes antérieures à cette date.",
        "schema": {
          "type": "string",
          "format": "datetime",
          "example": "2019-12-06T12:00:00Z"
        }
      },
      "queryPickupPointCarrierCode": {
        "in": "query",
        "name": "carrierCode",
        "description": "Filtre par code du transporteur",
        "schema": {
          "type": "string",
          "example": "bpost"
        }
      },
      "queryStoreId": {
        "in": "query",
        "name": "storeId",
        "description": "Filtre par id magasin",
        "schema": {
          "type": "string"
        }
      },
      "queryStoreIdRequired": {
        "in": "query",
        "required": true,
        "description": "Filtre par id magasin",
        "name": "storeId",
        "schema": {
          "type": "string"
        }
      },
      "queryMode": {
        "in": "query",
        "name": "mode",
        "description": "Format de l'étiquette",
        "schema": {
          "type": "string",
          "default": "pdf",
          "enum": [
            "pdf",
            "zpl"
          ]
        }
      },
      "queryLatitude": {
        "in": "query",
        "required": true,
        "description": "Latitude du point de recherche",
        "name": "latitude",
        "schema": {
          "type": "number"
        }
      },
      "queryLongitude": {
        "in": "query",
        "description": "Longitude du point de recherche",
        "required": true,
        "name": "longitude",
        "schema": {
          "type": "number"
        }
      },
      "queryNumber": {
        "in": "query",
        "required": false,
        "description": "Nombre de points relais retournés",
        "name": "number",
        "schema": {
          "type": "integer",
          "maximum": 25,
          "default": 10
        }
      },
      "queryKilometricDistance": {
        "in": "query",
        "required": false,
        "description": "Distance en kilomètres du rayon de recherche",
        "name": "kilometricDistance",
        "schema": {
          "type": "integer",
          "maximum": 40,
          "default": 5
        }
      },
      "queryPickupPointType": {
        "in": "query",
        "required": false,
        "name": "type",
        "description": "Type de point relais",
        "schema": {
          "type": "string",
          "enum": [
            "PICKUP_POINT_AGENCY",
            "PICKUP_POINT_POST_OFFICE",
            "PICKUP_POINT_RELAY_WITH_LOCKER",
            "PICKUP_POINT_RELAY_WITHOUT_LOCKER",
            "PICKUP_POINT_ALL"
          ],
          "default": "PICKUP_POINT_RELAY_WITH_LOCKER"
        }
      },
      "pathOrderId": {
        "in": "path",
        "required": true,
        "description": "Id de l'ordre de livraison",
        "name": "orderId",
        "schema": {
          "type": "string"
        }
      },
      "pathDocumentId": {
        "in": "path",
        "required": true,
        "description": "Id du document",
        "name": "documentId",
        "schema": {
          "type": "string"
        }
      },
      "pathPriceId": {
        "in": "path",
        "required": true,
        "description": "Id de la demande de prix",
        "name": "priceId",
        "schema": {
          "type": "string"
        }
      }
    }
  }
}